basePath: /api/v1
definitions:
  anypb.Any:
    properties:
      type_url:
        description: |-
          A URL/resource name that uniquely identifies the type of the serialized
          protocol buffer message. This string must contain at least
          one "/" character. The last segment of the URL's path must represent
          the fully qualified name of the type (as in
          `path/google.protobuf.Duration`). The name should be in a canonical form
          (e.g., leading "." is not accepted).

          In practice, teams usually precompile into the binary all types that they
          expect it to use in the context of Any. However, for URLs which use the
          scheme `http`, `https`, or no scheme, one can optionally set up a type
          server that maps type URLs to message definitions as follows:

            - If no scheme is provided, `https` is assumed.
            - An HTTP GET on the URL must yield a [google.protobuf.Type][]
              value in binary format, or produce an error.
            - Applications are allowed to cache lookup results based on the
              URL, or have them precompiled into a binary to avoid any
              lookup. Therefore, binary compatibility needs to be preserved
              on changes to types. (Use versioned type names to manage
              breaking changes.)

          Note: this functionality is not currently available in the official
          protobuf release, and it is not used for type URLs beginning with
          type.googleapis.com.

          Schemes other than `http`, `https` (or the empty scheme) might be
          used with implementation specific semantics.
        type: string
      value:
        description: Must be a valid serialized protocol buffer of the above specified
          type.
        items:
          type: integer
        type: array
    type: object
  block.BlockProof:
    properties:
      block_header_hash:
        items:
          type: integer
        type: array
      block_tree_hash_chain:
        $ref: '#/definitions/block.BlockTreeHashChain'
      hash_value:
        description: hash value of either primary tx or secondary txs or zero hash,
          depending on proof type
        items:
          type: integer
        type: array
      proof_type:
        $ref: '#/definitions/block.ProofType'
      sec_tree_hash_chain:
        $ref: '#/definitions/block.SecTreeHashChain'
      transactions_hash:
        items:
          type: integer
        type: array
      unicity_certificate:
        $ref: '#/definitions/certificates.UnicityCertificate'
    type: object
  block.BlockTreeHashChain:
    properties:
      items:
        items:
          $ref: '#/definitions/block.ChainItem'
        type: array
    type: object
  block.ChainItem:
    properties:
      hash:
        items:
          type: integer
        type: array
      val:
        items:
          type: integer
        type: array
    type: object
  block.MerklePathItem:
    properties:
      direction_left:
        description: DirectionLeft direction from parent node; left=true right=false
        type: boolean
      path_item:
        description: PathItem Hash of Merkle Tree node
        items:
          type: integer
        type: array
    type: object
  block.ProofType:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    type: integer
    x-enum-varnames:
    - ProofType_PRIM
    - ProofType_SEC
    - ProofType_ONLYSEC
    - ProofType_NOTRANS
    - ProofType_EMPTYBLOCK
  block.SecTreeHashChain:
    properties:
      items:
        items:
          $ref: '#/definitions/block.MerklePathItem'
        type: array
    type: object
  block.TxProof:
    properties:
      block_number:
        type: integer
      proof:
        $ref: '#/definitions/block.BlockProof'
      tx:
        $ref: '#/definitions/txsystem.Transaction'
    type: object
  bp.Bill:
    properties:
      fc_block_number:
        description: block number when fee credit bill balance was last updated
        type: integer
      id:
        items:
          type: integer
        type: array
      is_dc_bill:
        type: boolean
      tx_hash:
        items:
          type: integer
        type: array
      tx_proof:
        $ref: '#/definitions/block.TxProof'
      value:
        type: integer
    type: object
  bp.Bills:
    properties:
      bills:
        items:
          $ref: '#/definitions/bp.Bill'
        type: array
    type: object
  certificates.InputRecord:
    properties:
      block_hash:
        description: hash of the block
        items:
          type: integer
        type: array
      hash:
        description: state hash to be certified
        items:
          type: integer
        type: array
      previous_hash:
        description: previously certified state hash
        items:
          type: integer
        type: array
      round_number:
        description: transaction system's round number
        type: integer
      sum_of_earned_fees:
        description: sum of the actual fees over all transaction records in the block
        type: integer
      summary_value:
        description: summary value to certified
        items:
          type: integer
        type: array
    type: object
  certificates.UnicityCertificate:
    properties:
      input_record:
        $ref: '#/definitions/certificates.InputRecord'
      unicity_seal:
        $ref: '#/definitions/certificates.UnicitySeal'
      unicity_tree_certificate:
        $ref: '#/definitions/certificates.UnicityTreeCertificate'
    type: object
  certificates.UnicitySeal:
    properties:
      hash:
        items:
          type: integer
        type: array
      previous_hash:
        items:
          type: integer
        type: array
      root_chain_round_number:
        type: integer
      signatures:
        additionalProperties:
          items:
            type: integer
          type: array
        type: object
    type: object
  certificates.UnicityTreeCertificate:
    properties:
      sibling_hashes:
        items:
          items:
            type: integer
          type: array
        type: array
      system_description_hash:
        items:
          type: integer
        type: array
      system_identifier:
        items:
          type: integer
        type: array
    type: object
  money.BalanceResponse:
    properties:
      balance:
        example: "0"
        type: string
    type: object
  money.ErrorResponse:
    properties:
      message:
        type: string
    type: object
  money.ListBillVM:
    properties:
      id:
        example: AAAAAAgwv3UA1HfGO4qc1T3I3EOvqxfcrhMjJpr9Tn4=
        format: base64
        type: string
      isDcBill:
        example: false
        type: boolean
      txHash:
        example: Q4ShCITC0ODXPR+j1Zl/teYcoU3/mAPy0x8uSsvQFM8=
        format: base64
        type: string
      value:
        example: "1000"
        type: string
    type: object
  money.ListBillsResponse:
    properties:
      bills:
        items:
          $ref: '#/definitions/money.ListBillVM'
        type: array
      total:
        example: 1
        type: integer
    type: object
  money.RoundNumberResponse:
    properties:
      roundNumber:
        example: "0"
        type: string
    type: object
  txsystem.ClientMetadata:
    properties:
      fee_credit_record_id:
        description: fee credit record identifier (should be empty for fee credit
          transactions)
        items:
          type: integer
        type: array
      max_fee:
        description: maximum fee the user is willing to pay for the execution of this
          transaction
        type: integer
      timeout:
        description: transaction timeout block height
        type: integer
    type: object
  txsystem.ServerMetadata:
    properties:
      fee:
        description: actual transaction fee charged
        type: integer
    type: object
  txsystem.Transaction:
    properties:
      client_metadata:
        allOf:
        - $ref: '#/definitions/txsystem.ClientMetadata'
        description: transaction metadata added by user
      fee_proof:
        description: optional fee authorization proof (omitted when the main owner
          proof also satisfies the fee owner condition)
        items:
          type: integer
        type: array
      owner_proof:
        items:
          type: integer
        type: array
      server_metadata:
        allOf:
        - $ref: '#/definitions/txsystem.ServerMetadata'
        description: transaction metadata added by node
      system_id:
        items:
          type: integer
        type: array
      transaction_attributes:
        $ref: '#/definitions/anypb.Any'
      unit_id:
        items:
          type: integer
        type: array
    type: object
info:
  contact: {}
  description: This service processes blocks from the Money partition and indexes
    ownership of bills.
  title: Money Partition Indexing Backend API
  version: "1.0"
paths:
  /balance:
    get:
      operationId: "2"
      parameters:
      - description: Public key prefixed with 0x
        in: query
        name: pubkey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/money.BalanceResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/money.ErrorResponse'
        "500":
          description: Internal Server Error
      summary: Get balance
  /fee-credit-bill:
    get:
      operationId: "5"
      parameters:
      - description: ID of the bill (hex)
        in: query
        name: bill_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/bp.Bill'
      summary: Get Fee Credit Bill
  /list-bills:
    get:
      operationId: "1"
      parameters:
      - description: Public key prefixed with 0x
        example: "0x000000000000000000000000000000000000000000000000000000000000000123"
        in: query
        name: pubkey
        required: true
        type: string
      - default: 100
        description: limits how many bills are returned in response
        in: query
        name: limit
        type: integer
      - default: 0
        description: response will include bills starting after offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/money.ListBillsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/money.ErrorResponse'
        "500":
          description: Internal Server Error
      summary: List bills
  /proof:
    get:
      operationId: "3"
      parameters:
      - description: ID of the bill (hex)
        in: query
        name: bill_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/bp.Bills'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/money.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/money.ErrorResponse'
        "500":
          description: Internal Server Error
      summary: Get proof
  /round-number:
    get:
      operationId: "4"
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/money.RoundNumberResponse'
      summary: Money partition's latest block number
swagger: "2.0"
